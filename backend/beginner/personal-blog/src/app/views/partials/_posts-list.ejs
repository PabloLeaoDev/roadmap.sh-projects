<div class="section-title">
    <h2 id="articles">
        <% if (search) { %>
            Resultados para "<%= search %>"
        <% } else if (category) { %>
            Categoria: <%= category %>
        <% } else { %>
            칔ltimos Artigos
        <% } %>
    </h2>
    <p>
        <%= posts && posts.length > 0 ? posts.length : 0 %> 
        <%= posts && posts.length === 1 ? 'artigo encontrado' : 'artigos encontrados' %>
    </p>
</div>

<div class="filter-tabs">
    <a 
        href="/home" 
        class="filter-tab <%= (!category || category === '') ? 'active' : '' %>"
        hx-get="/home"
        hx-target="#articles-container"
        hx-push-url="true"
    >
        游늶 Todos
    </a>
    <a 
        href="/home?category=Tecnologia" 
        class="filter-tab <%= category === 'Tecnologia' ? 'active' : '' %>"
        hx-get="/home?category=Tecnologia"
        hx-target="#articles-container"
        hx-push-url="true"
    >
        游눹 Tecnologia
    </a>
    <a 
        href="/home?category=Educa칞칚o" 
        class="filter-tab <%= category === 'Educa칞칚o' ? 'active' : '' %>"
        hx-get="/home?category=Educa칞칚o"
        hx-target="#articles-container"
        hx-push-url="true"
    >
        游닄 Educa칞칚o
    </a>
    <a 
        href="/home?category=Sa칰de" 
        class="filter-tab <%= category === 'Sa칰de' ? 'active' : '' %>"
        hx-get="/home?category=Sa칰de"
        hx-target="#articles-container"
        hx-push-url="true"
    >
        游낀 Sa칰de
    </a>
    <a 
        href="/home?category=Neg칩cios" 
        class="filter-tab <%= category === 'Neg칩cios' ? 'active' : '' %>"
        hx-get="/home?category=Neg칩cios"
        hx-target="#articles-container"
        hx-push-url="true"
    >
        游눺 Neg칩cios
    </a>
    <a 
        href="/home?category=Lifestyle" 
        class="filter-tab <%= category === 'Lifestyle' ? 'active' : '' %>"
        hx-get="/home?category=Lifestyle"
        hx-target="#articles-container"
        hx-push-url="true"
    >
        游 Lifestyle
    </a>
</div>

<% if (posts && posts.length > 0) { %>
    <div class="articles-grid">
        <% posts.forEach((post) => { %>
            <%- include('_post-card', { post: post }) %>
        <% }); %>
    </div>

    <div class="load-more-container">
        <button 
            class="load-more-btn"
            hx-get="/home/load-more?offset=<%= posts.length %><%= category ? '&category=' + encodeURIComponent(category) : '' %><%= search ? '&search=' + encodeURIComponent(search) : '' %>"
            hx-target=".articles-grid"
            hx-swap="beforeend"
            hx-indicator="#load-indicator"
        >
            游닀 Carregar mais artigos
            <span id="load-indicator" class="htmx-indicator">Carregando...</span>
        </button>
    </div>
<% } else { %>
    <div class="no-articles">
        <div class="no-articles-icon">游늯</div>
        <h3>Nenhum artigo encontrado</h3>
        <% if (search) { %>
            <p>N칚o encontramos artigos correspondentes  sua busca "<%= search %>".</p>
            <p><a href="/home" hx-get="/home" hx-target="#articles-container" hx-push-url="true">Ver todos os artigos</a></p>
        <% } else if (category) { %>
            <p>N칚o h치 artigos na categoria "<%= category %>" no momento.</p>
            <p><a href="/home" hx-get="/home" hx-target="#articles-container" hx-push-url="true">Ver todos os artigos</a></p>
        <% } else { %>
            <p>Ainda n칚o h치 artigos publicados. Volte em breve!</p>
        <% } %>
    </div>
<% } %>